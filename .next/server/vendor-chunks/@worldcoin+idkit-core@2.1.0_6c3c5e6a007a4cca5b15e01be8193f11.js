"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@worldcoin+idkit-core@2.1.0_6c3c5e6a007a4cca5b15e01be8193f11";
exports.ids = ["vendor-chunks/@worldcoin+idkit-core@2.1.0_6c3c5e6a007a4cca5b15e01be8193f11"];
exports.modules = {

/***/ "(ssr)/./node_modules/.pnpm/@worldcoin+idkit-core@2.1.0_6c3c5e6a007a4cca5b15e01be8193f11/node_modules/@worldcoin/idkit-core/build/chunk-HZ2SQA5V.js":
/*!****************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@worldcoin+idkit-core@2.1.0_6c3c5e6a007a4cca5b15e01be8193f11/node_modules/@worldcoin/idkit-core/build/chunk-HZ2SQA5V.js ***!
  \****************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   encodeAction: () => (/* binding */ encodeAction),\n/* harmony export */   generateSignal: () => (/* binding */ generateSignal),\n/* harmony export */   hashToField: () => (/* binding */ hashToField),\n/* harmony export */   packAndEncode: () => (/* binding */ packAndEncode),\n/* harmony export */   solidityEncode: () => (/* binding */ solidityEncode)\n/* harmony export */ });\n/* harmony import */ var buffer_index_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! buffer/index.js */ \"(ssr)/./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js\");\n/* harmony import */ var ox__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ox */ \"(ssr)/./node_modules/.pnpm/ox@0.1.8_typescript@5.9.3/node_modules/ox/_esm/core/Bytes.js\");\n/* harmony import */ var ox__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ox */ \"(ssr)/./node_modules/.pnpm/ox@0.1.8_typescript@5.9.3/node_modules/ox/_esm/core/Hex.js\");\n/* harmony import */ var ox__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ox */ \"(ssr)/./node_modules/.pnpm/ox@0.1.8_typescript@5.9.3/node_modules/ox/_esm/core/AbiParameters.js\");\n/* harmony import */ var ox__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ox */ \"(ssr)/./node_modules/.pnpm/ox@0.1.8_typescript@5.9.3/node_modules/ox/_esm/core/Hash.js\");\n// src/lib/hashing.ts\n\n\nfunction hashToField(input) {\n  if (ox__WEBPACK_IMPORTED_MODULE_1__.validate(input) || ox__WEBPACK_IMPORTED_MODULE_2__.validate(input)) return hashEncodedBytes(input);\n  return hashString(input);\n}\nfunction packAndEncode(input) {\n  const [types, values] = input.reduce(\n    ([types2, values2], [type, value]) => {\n      types2.push(type);\n      values2.push(value);\n      return [types2, values2];\n    },\n    [[], []]\n  );\n  return hashEncodedBytes(ox__WEBPACK_IMPORTED_MODULE_3__.encodePacked(types, values));\n}\nfunction hashString(input) {\n  const bytesInput = buffer_index_js__WEBPACK_IMPORTED_MODULE_0__.Buffer.from(input);\n  return hashEncodedBytes(bytesInput);\n}\nfunction hashEncodedBytes(input) {\n  const hash = BigInt(ox__WEBPACK_IMPORTED_MODULE_4__.keccak256(input, { as: \"Hex\" })) >> 8n;\n  const rawDigest = hash.toString(16);\n  return { hash, digest: `0x${rawDigest.padStart(64, \"0\")}` };\n}\nvar solidityEncode = (types, values) => {\n  if (types.length !== values.length) {\n    throw new Error(\"Types and values arrays must have the same length.\");\n  }\n  return { types, values };\n};\nvar generateSignal = (signal) => {\n  if (!signal || typeof signal === \"string\") return hashToField(signal ?? \"\");\n  return packAndEncode(signal.types.map((type, index) => [type, signal.values[index]]));\n};\nvar encodeAction = (action) => {\n  if (!action) return \"\";\n  if (typeof action === \"string\") return action;\n  return action.types.map((type, index) => `${type}(${action.values[index]})`).join(\",\");\n};\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHdvcmxkY29pbitpZGtpdC1jb3JlQDIuMS4wXzZjM2M1ZTZhMDA3YTRjY2E1YjE1ZTAxYmU4MTkzZjExL25vZGVfbW9kdWxlcy9Ad29ybGRjb2luL2lka2l0LWNvcmUvYnVpbGQvY2h1bmstSFoyU1FBNVYuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ3lDO0FBQ1k7QUFDckQ7QUFDQSxNQUFNLHdDQUFjLFdBQVcsd0NBQVk7QUFDM0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsMEJBQTBCLDRDQUEwQjtBQUNwRDtBQUNBO0FBQ0EscUJBQXFCLG1EQUFNO0FBQzNCO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQix5Q0FBYyxVQUFVLFdBQVc7QUFDekQ7QUFDQSxXQUFXLG1CQUFtQiw0QkFBNEI7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOENBQThDLEtBQUssR0FBRyxxQkFBcUI7QUFDM0U7O0FBUUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wdWxzZWNoZWNrLy4vbm9kZV9tb2R1bGVzLy5wbnBtL0B3b3JsZGNvaW4raWRraXQtY29yZUAyLjEuMF82YzNjNWU2YTAwN2E0Y2NhNWIxNWUwMWJlODE5M2YxMS9ub2RlX21vZHVsZXMvQHdvcmxkY29pbi9pZGtpdC1jb3JlL2J1aWxkL2NodW5rLUhaMlNRQTVWLmpzPzg4ZjQiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gc3JjL2xpYi9oYXNoaW5nLnRzXG5pbXBvcnQgeyBCdWZmZXIgfSBmcm9tIFwiYnVmZmVyL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBBYmlQYXJhbWV0ZXJzLCBCeXRlcywgSGV4LCBIYXNoIH0gZnJvbSBcIm94XCI7XG5mdW5jdGlvbiBoYXNoVG9GaWVsZChpbnB1dCkge1xuICBpZiAoQnl0ZXMudmFsaWRhdGUoaW5wdXQpIHx8IEhleC52YWxpZGF0ZShpbnB1dCkpIHJldHVybiBoYXNoRW5jb2RlZEJ5dGVzKGlucHV0KTtcbiAgcmV0dXJuIGhhc2hTdHJpbmcoaW5wdXQpO1xufVxuZnVuY3Rpb24gcGFja0FuZEVuY29kZShpbnB1dCkge1xuICBjb25zdCBbdHlwZXMsIHZhbHVlc10gPSBpbnB1dC5yZWR1Y2UoXG4gICAgKFt0eXBlczIsIHZhbHVlczJdLCBbdHlwZSwgdmFsdWVdKSA9PiB7XG4gICAgICB0eXBlczIucHVzaCh0eXBlKTtcbiAgICAgIHZhbHVlczIucHVzaCh2YWx1ZSk7XG4gICAgICByZXR1cm4gW3R5cGVzMiwgdmFsdWVzMl07XG4gICAgfSxcbiAgICBbW10sIFtdXVxuICApO1xuICByZXR1cm4gaGFzaEVuY29kZWRCeXRlcyhBYmlQYXJhbWV0ZXJzLmVuY29kZVBhY2tlZCh0eXBlcywgdmFsdWVzKSk7XG59XG5mdW5jdGlvbiBoYXNoU3RyaW5nKGlucHV0KSB7XG4gIGNvbnN0IGJ5dGVzSW5wdXQgPSBCdWZmZXIuZnJvbShpbnB1dCk7XG4gIHJldHVybiBoYXNoRW5jb2RlZEJ5dGVzKGJ5dGVzSW5wdXQpO1xufVxuZnVuY3Rpb24gaGFzaEVuY29kZWRCeXRlcyhpbnB1dCkge1xuICBjb25zdCBoYXNoID0gQmlnSW50KEhhc2gua2VjY2FrMjU2KGlucHV0LCB7IGFzOiBcIkhleFwiIH0pKSA+PiA4bjtcbiAgY29uc3QgcmF3RGlnZXN0ID0gaGFzaC50b1N0cmluZygxNik7XG4gIHJldHVybiB7IGhhc2gsIGRpZ2VzdDogYDB4JHtyYXdEaWdlc3QucGFkU3RhcnQoNjQsIFwiMFwiKX1gIH07XG59XG52YXIgc29saWRpdHlFbmNvZGUgPSAodHlwZXMsIHZhbHVlcykgPT4ge1xuICBpZiAodHlwZXMubGVuZ3RoICE9PSB2YWx1ZXMubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwiVHlwZXMgYW5kIHZhbHVlcyBhcnJheXMgbXVzdCBoYXZlIHRoZSBzYW1lIGxlbmd0aC5cIik7XG4gIH1cbiAgcmV0dXJuIHsgdHlwZXMsIHZhbHVlcyB9O1xufTtcbnZhciBnZW5lcmF0ZVNpZ25hbCA9IChzaWduYWwpID0+IHtcbiAgaWYgKCFzaWduYWwgfHwgdHlwZW9mIHNpZ25hbCA9PT0gXCJzdHJpbmdcIikgcmV0dXJuIGhhc2hUb0ZpZWxkKHNpZ25hbCA/PyBcIlwiKTtcbiAgcmV0dXJuIHBhY2tBbmRFbmNvZGUoc2lnbmFsLnR5cGVzLm1hcCgodHlwZSwgaW5kZXgpID0+IFt0eXBlLCBzaWduYWwudmFsdWVzW2luZGV4XV0pKTtcbn07XG52YXIgZW5jb2RlQWN0aW9uID0gKGFjdGlvbikgPT4ge1xuICBpZiAoIWFjdGlvbikgcmV0dXJuIFwiXCI7XG4gIGlmICh0eXBlb2YgYWN0aW9uID09PSBcInN0cmluZ1wiKSByZXR1cm4gYWN0aW9uO1xuICByZXR1cm4gYWN0aW9uLnR5cGVzLm1hcCgodHlwZSwgaW5kZXgpID0+IGAke3R5cGV9KCR7YWN0aW9uLnZhbHVlc1tpbmRleF19KWApLmpvaW4oXCIsXCIpO1xufTtcblxuZXhwb3J0IHtcbiAgaGFzaFRvRmllbGQsXG4gIHBhY2tBbmRFbmNvZGUsXG4gIHNvbGlkaXR5RW5jb2RlLFxuICBnZW5lcmF0ZVNpZ25hbCxcbiAgZW5jb2RlQWN0aW9uXG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@worldcoin+idkit-core@2.1.0_6c3c5e6a007a4cca5b15e01be8193f11/node_modules/@worldcoin/idkit-core/build/chunk-HZ2SQA5V.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@worldcoin+idkit-core@2.1.0_6c3c5e6a007a4cca5b15e01be8193f11/node_modules/@worldcoin/idkit-core/build/index.js":
/*!*******************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@worldcoin+idkit-core@2.1.0_6c3c5e6a007a4cca5b15e01be8193f11/node_modules/@worldcoin/idkit-core/build/index.js ***!
  \*******************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AppErrorCodes: () => (/* binding */ AppErrorCodes),\n/* harmony export */   CredentialType: () => (/* binding */ CredentialType),\n/* harmony export */   DEFAULT_VERIFICATION_LEVEL: () => (/* binding */ DEFAULT_VERIFICATION_LEVEL),\n/* harmony export */   VerificationLevel: () => (/* binding */ VerificationLevel),\n/* harmony export */   VerificationState: () => (/* binding */ VerificationState),\n/* harmony export */   createWorldBridgeStore: () => (/* binding */ createWorldBridgeStore),\n/* harmony export */   useWorldBridgeStore: () => (/* binding */ useWorldBridgeStore),\n/* harmony export */   verification_level_to_credential_types: () => (/* binding */ verification_level_to_credential_types)\n/* harmony export */ });\n/* harmony import */ var _chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./chunk-HZ2SQA5V.js */ \"(ssr)/./node_modules/.pnpm/@worldcoin+idkit-core@2.1.0_6c3c5e6a007a4cca5b15e01be8193f11/node_modules/@worldcoin/idkit-core/build/chunk-HZ2SQA5V.js\");\n/* harmony import */ var zustand__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! zustand */ \"(ssr)/./node_modules/.pnpm/zustand@4.5.7_@types+react@18.3.25_react@18.3.1/node_modules/zustand/esm/index.mjs\");\n/* harmony import */ var browser_or_node__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! browser-or-node */ \"(ssr)/./node_modules/.pnpm/browser-or-node@3.0.0-pre.0/node_modules/browser-or-node/dist/index.mjs\");\n/* harmony import */ var buffer_index_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! buffer/index.js */ \"(ssr)/./node_modules/.pnpm/buffer@6.0.3/node_modules/buffer/index.js\");\n\n\n// src/types/bridge.ts\nvar AppErrorCodes = /* @__PURE__ */ ((AppErrorCodes2) => {\n  AppErrorCodes2[\"ConnectionFailed\"] = \"connection_failed\";\n  AppErrorCodes2[\"VerificationRejected\"] = \"verification_rejected\";\n  AppErrorCodes2[\"MaxVerificationsReached\"] = \"max_verifications_reached\";\n  AppErrorCodes2[\"CredentialUnavailable\"] = \"credential_unavailable\";\n  AppErrorCodes2[\"MalformedRequest\"] = \"malformed_request\";\n  AppErrorCodes2[\"InvalidNetwork\"] = \"invalid_network\";\n  AppErrorCodes2[\"InclusionProofFailed\"] = \"inclusion_proof_failed\";\n  AppErrorCodes2[\"InclusionProofPending\"] = \"inclusion_proof_pending\";\n  AppErrorCodes2[\"UnexpectedResponse\"] = \"unexpected_response\";\n  AppErrorCodes2[\"FailedByHostApp\"] = \"failed_by_host_app\";\n  AppErrorCodes2[\"GenericError\"] = \"generic_error\";\n  return AppErrorCodes2;\n})(AppErrorCodes || {});\nvar VerificationState = /* @__PURE__ */ ((VerificationState2) => {\n  VerificationState2[\"PreparingClient\"] = \"loading_widget\";\n  VerificationState2[\"WaitingForConnection\"] = \"awaiting_connection\";\n  VerificationState2[\"WaitingForApp\"] = \"awaiting_app\";\n  VerificationState2[\"Confirmed\"] = \"confirmed\";\n  VerificationState2[\"Failed\"] = \"failed\";\n  return VerificationState2;\n})(VerificationState || {});\n\n// src/types/config.ts\nvar CredentialType = /* @__PURE__ */ ((CredentialType2) => {\n  CredentialType2[\"Orb\"] = \"orb\";\n  CredentialType2[\"SecureDocument\"] = \"secure_document\";\n  CredentialType2[\"Document\"] = \"document\";\n  CredentialType2[\"Device\"] = \"device\";\n  return CredentialType2;\n})(CredentialType || {});\nvar VerificationLevel = /* @__PURE__ */ ((VerificationLevel2) => {\n  VerificationLevel2[\"Orb\"] = \"orb\";\n  VerificationLevel2[\"SecureDocument\"] = \"secure_document\";\n  VerificationLevel2[\"Document\"] = \"document\";\n  VerificationLevel2[\"Device\"] = \"device\";\n  return VerificationLevel2;\n})(VerificationLevel || {});\n\n// src/bridge.ts\n\n\n// src/lib/validation.ts\nfunction validate_bridge_url(bridge_url, is_staging) {\n  try {\n    new URL(bridge_url);\n  } catch (e) {\n    return { valid: false, errors: [\"Failed to parse Bridge URL.\"] };\n  }\n  const test_url = new URL(bridge_url);\n  const errors = [];\n  if (is_staging && [\"localhost\", \"127.0.0.1\"].includes(test_url.hostname)) {\n    console.log(\"Using staging app_id with localhost bridge_url. Skipping validation.\");\n    return { valid: true };\n  }\n  if (test_url.protocol !== \"https:\") {\n    errors.push(\"Bridge URL must use HTTPS.\");\n  }\n  if (test_url.port) {\n    errors.push(\"Bridge URL must use the default port (443).\");\n  }\n  if (test_url.pathname !== \"/\") {\n    errors.push(\"Bridge URL must not have a path.\");\n  }\n  if (test_url.search) {\n    errors.push(\"Bridge URL must not have query parameters.\");\n  }\n  if (test_url.hash) {\n    errors.push(\"Bridge URL must not have a fragment.\");\n  }\n  if (!test_url.hostname.endsWith(\".worldcoin.org\") && !test_url.hostname.endsWith(\".toolsforhumanity.com\")) {\n    console.warn(\n      \"Bridge URL should be a subdomain of worldcoin.org or toolsforhumanity.com. The user's identity wallet may refuse to connect. This is a temporary measure and may be removed in the future.\"\n    );\n  }\n  if (errors.length) {\n    return { valid: false, errors };\n  }\n  return { valid: true };\n}\n\n// src/lib/platform.ts\n\nvar isReactNative = () => {\n  return typeof navigator !== \"undefined\" && navigator.product === \"ReactNative\";\n};\nvar isWeb = () => {\n  return browser_or_node__WEBPACK_IMPORTED_MODULE_1__.isBrowser;\n};\nvar getGlobalObject = () => {\n  if (typeof globalThis !== \"undefined\") return globalThis;\n  if (typeof self !== \"undefined\") return self;\n  if (typeof window !== \"undefined\") return window;\n  throw new Error(\"Unable to locate global object\");\n};\nvar getCrypto = () => {\n  const globalObj = getGlobalObject();\n  if (typeof globalObj.crypto !== \"undefined\") {\n    return globalObj.crypto;\n  }\n  throw new Error(\"Crypto API not available. For React Native, ensure polyfills are set up properly.\");\n};\n\n// src/lib/utils.ts\n\nvar DEFAULT_VERIFICATION_LEVEL = \"orb\" /* Orb */;\nvar buffer_encode = (buffer) => {\n  return buffer_index_js__WEBPACK_IMPORTED_MODULE_2__.Buffer.from(buffer).toString(\"base64\");\n};\nvar buffer_decode = (encoded) => {\n  return buffer_index_js__WEBPACK_IMPORTED_MODULE_2__.Buffer.from(encoded, \"base64\");\n};\nvar verification_level_to_credential_types = (verification_level) => {\n  switch (verification_level) {\n    case \"device\" /* Device */:\n      return [\"orb\" /* Orb */, \"device\" /* Device */];\n    case \"document\" /* Document */:\n      return [\"document\" /* Document */, \"secure_document\" /* SecureDocument */, \"orb\" /* Orb */];\n    case \"secure_document\" /* SecureDocument */:\n      return [\"secure_document\" /* SecureDocument */, \"orb\" /* Orb */];\n    case \"orb\" /* Orb */:\n      return [\"orb\" /* Orb */];\n    default:\n      throw new Error(`Unknown verification level: ${verification_level}`);\n  }\n};\nvar credential_type_to_verification_level = (credential_type) => {\n  switch (credential_type) {\n    case \"orb\" /* Orb */:\n      return \"orb\" /* Orb */;\n    case \"secure_document\" /* SecureDocument */:\n      return \"secure_document\" /* SecureDocument */;\n    case \"document\" /* Document */:\n      return \"document\" /* Document */;\n    case \"device\" /* Device */:\n      return \"device\" /* Device */;\n    default:\n      throw new Error(`Unknown credential_type: ${credential_type}`);\n  }\n};\n\n// src/lib/adapters/web-crypto-adapter.ts\nvar WebCryptoAdapter = class {\n  constructor() {\n    this.encoder = new TextEncoder();\n    this.decoder = new TextDecoder();\n  }\n  async generateKey() {\n    return {\n      iv: window.crypto.getRandomValues(new Uint8Array(12)),\n      key: await window.crypto.subtle.generateKey({ name: \"AES-GCM\", length: 256 }, true, [\"encrypt\", \"decrypt\"])\n    };\n  }\n  async exportKey(key) {\n    return buffer_encode(await window.crypto.subtle.exportKey(\"raw\", key));\n  }\n  async encryptRequest(key, iv, request) {\n    return {\n      iv: buffer_encode(iv),\n      payload: buffer_encode(\n        await window.crypto.subtle.encrypt({ name: \"AES-GCM\", iv }, key, this.encoder.encode(request))\n      )\n    };\n  }\n  async decryptResponse(key, iv, payload) {\n    return this.decoder.decode(\n      await window.crypto.subtle.decrypt({ name: \"AES-GCM\", iv }, key, buffer_decode(payload))\n    );\n  }\n};\n\n// src/lib/adapters/react-native-crypto-adapter.ts\nvar ReactNativeCryptoAdapter = class {\n  constructor() {\n    this.encoder = new TextEncoder();\n    this.decoder = new TextDecoder();\n  }\n  async generateKey() {\n    const crypto = getCrypto();\n    return {\n      iv: crypto.getRandomValues(new Uint8Array(12)),\n      key: await crypto.subtle.generateKey({ name: \"AES-GCM\", length: 256 }, true, [\"encrypt\", \"decrypt\"])\n    };\n  }\n  async exportKey(key) {\n    const crypto = getCrypto();\n    return buffer_encode(await crypto.subtle.exportKey(\"raw\", key));\n  }\n  async encryptRequest(key, iv, request) {\n    const crypto = getCrypto();\n    return {\n      iv: buffer_encode(iv),\n      payload: buffer_encode(\n        await crypto.subtle.encrypt({ name: \"AES-GCM\", iv }, key, this.encoder.encode(request))\n      )\n    };\n  }\n  async decryptResponse(key, iv, payload) {\n    const crypto = getCrypto();\n    return this.decoder.decode(await crypto.subtle.decrypt({ name: \"AES-GCM\", iv }, key, buffer_decode(payload)));\n  }\n};\n\n// src/lib/crypto.ts\nvar cryptoAdapterInstance = null;\nvar getCryptoAdapter = () => {\n  if (cryptoAdapterInstance) {\n    return cryptoAdapterInstance;\n  }\n  if (isWeb()) {\n    cryptoAdapterInstance = new WebCryptoAdapter();\n    return cryptoAdapterInstance;\n  }\n  if (isReactNative()) {\n    cryptoAdapterInstance = new ReactNativeCryptoAdapter();\n    return cryptoAdapterInstance;\n  }\n  throw new Error(\"Unsupported platform\");\n};\nvar generateKey = async () => {\n  return getCryptoAdapter().generateKey();\n};\nvar exportKey = async (key) => {\n  return getCryptoAdapter().exportKey(key);\n};\nvar encryptRequest = async (key, iv, request) => {\n  return getCryptoAdapter().encryptRequest(key, iv, request);\n};\nvar decryptResponse = async (key, iv, payload) => {\n  return getCryptoAdapter().decryptResponse(key, iv, payload);\n};\n\n// src/bridge.ts\nvar DEFAULT_BRIDGE_URL = \"https://bridge.worldcoin.org\";\nvar createStoreImplementation = (set, get) => ({\n  iv: null,\n  key: null,\n  result: null,\n  errorCode: null,\n  requestId: null,\n  connectorURI: null,\n  bridge_url: DEFAULT_BRIDGE_URL,\n  verificationState: \"loading_widget\" /* PreparingClient */,\n  createClient: async ({ bridge_url, app_id, verification_level, action_description, action, signal, partner }) => {\n    const { key, iv } = await generateKey();\n    if (bridge_url) {\n      const validation = validate_bridge_url(bridge_url, app_id.includes(\"staging\"));\n      if (!validation.valid) {\n        console.error(validation.errors.join(\"\\n\"));\n        set({ verificationState: \"failed\" /* Failed */ });\n        throw new Error(\"Invalid bridge_url. Please check the console for more details.\");\n      }\n    }\n    const res = await fetch(new URL(\"/request\", bridge_url ?? DEFAULT_BRIDGE_URL), {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify(\n        await encryptRequest(\n          key,\n          iv,\n          JSON.stringify({\n            app_id,\n            action_description,\n            action: (0,_chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__.encodeAction)(action),\n            signal: (0,_chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__.generateSignal)(signal).digest,\n            credential_types: verification_level_to_credential_types(\n              verification_level ?? DEFAULT_VERIFICATION_LEVEL\n            ),\n            verification_level: verification_level ?? DEFAULT_VERIFICATION_LEVEL\n          })\n        )\n      )\n    });\n    if (!res.ok) {\n      set({ verificationState: \"failed\" /* Failed */ });\n      throw new Error(\"Failed to create client\");\n    }\n    const { request_id } = await res.json();\n    set({\n      iv,\n      key,\n      requestId: request_id,\n      bridge_url: bridge_url ?? DEFAULT_BRIDGE_URL,\n      verificationState: \"awaiting_connection\" /* WaitingForConnection */,\n      connectorURI: `https://world.org/verify?t=wld&i=${request_id}&k=${encodeURIComponent(\n        await exportKey(key)\n      )}${bridge_url && bridge_url !== DEFAULT_BRIDGE_URL ? `&b=${encodeURIComponent(bridge_url)}` : \"\"}${partner ? `&partner=${encodeURIComponent(true)}` : \"\"}`\n    });\n  },\n  pollForUpdates: async () => {\n    const key = get().key;\n    if (!key) throw new Error(\"No keypair found. Please call `createClient` first.\");\n    const res = await fetch(new URL(`/response/${get().requestId}`, get().bridge_url));\n    if (!res.ok) {\n      return set({\n        errorCode: \"connection_failed\" /* ConnectionFailed */,\n        verificationState: \"failed\" /* Failed */\n      });\n    }\n    const { response, status } = await res.json();\n    if (status != \"completed\" /* Completed */) {\n      return set({\n        verificationState: status == \"retrieved\" /* Retrieved */ ? \"awaiting_app\" /* WaitingForApp */ : \"awaiting_connection\" /* WaitingForConnection */\n      });\n    }\n    let result = JSON.parse(\n      await decryptResponse(key, buffer_decode(response.iv), response.payload)\n    );\n    if (\"error_code\" in result) {\n      return set({\n        errorCode: result.error_code,\n        verificationState: \"failed\" /* Failed */\n      });\n    }\n    if (\"credential_type\" in result) {\n      result = {\n        verification_level: credential_type_to_verification_level(result.credential_type),\n        ...result\n      };\n    }\n    set({\n      result,\n      key: null,\n      requestId: null,\n      connectorURI: null,\n      verificationState: \"confirmed\" /* Confirmed */\n    });\n  },\n  reset: () => {\n    set({\n      iv: null,\n      key: null,\n      result: null,\n      errorCode: null,\n      requestId: null,\n      connectorURI: null,\n      verificationState: \"loading_widget\" /* PreparingClient */\n    });\n  }\n});\nvar useWorldBridgeStore = (0,zustand__WEBPACK_IMPORTED_MODULE_3__.create)(createStoreImplementation);\nvar createWorldBridgeStore = () => (0,zustand__WEBPACK_IMPORTED_MODULE_3__.create)(createStoreImplementation);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHdvcmxkY29pbitpZGtpdC1jb3JlQDIuMS4wXzZjM2M1ZTZhMDA3YTRjY2E1YjE1ZTAxYmU4MTkzZjExL25vZGVfbW9kdWxlcy9Ad29ybGRjb2luL2lka2l0LWNvcmUvYnVpbGQvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBRzZCOztBQUU3QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQyxxQkFBcUI7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHlCQUF5Qjs7QUFFMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHNCQUFzQjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLHlCQUF5Qjs7QUFFMUI7QUFDaUM7O0FBRWpDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsV0FBVztBQUNYOztBQUVBO0FBQ3FFO0FBQ3JFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUyxzREFBUztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ3lDO0FBQ3pDO0FBQ0E7QUFDQSxTQUFTLG1EQUFNO0FBQ2Y7QUFDQTtBQUNBLFNBQVMsbURBQU07QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxREFBcUQsbUJBQW1CO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtELGdCQUFnQjtBQUNsRTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9EQUFvRCw4QkFBOEI7QUFDbEY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLHFCQUFxQjtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLHFCQUFxQjtBQUNoRTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2Q0FBNkMsOEJBQThCO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQ0FBc0MscUJBQXFCO0FBQzNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQscUJBQXFCO0FBQ2xGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixxRkFBcUY7QUFDOUcsWUFBWSxVQUFVO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsY0FBYywwQ0FBMEM7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixvQ0FBb0M7QUFDckQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsZ0VBQVk7QUFDaEMsb0JBQW9CLGtFQUFjO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxZQUFZLDBDQUEwQztBQUN0RDtBQUNBO0FBQ0EsWUFBWSxhQUFhO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHdEQUF3RCxXQUFXLEtBQUs7QUFDeEU7QUFDQSxRQUFRLEVBQUUsd0RBQXdELCtCQUErQixPQUFPLEVBQUUsc0JBQXNCLHlCQUF5QixPQUFPO0FBQ2hLLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsaURBQWlELGdCQUFnQjtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBLFlBQVksbUJBQW1CO0FBQy9CO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxDQUFDO0FBQ0QsMEJBQTBCLCtDQUFNO0FBQ2hDLG1DQUFtQywrQ0FBTTtBQVV2QyIsInNvdXJjZXMiOlsid2VicGFjazovL3B1bHNlY2hlY2svLi9ub2RlX21vZHVsZXMvLnBucG0vQHdvcmxkY29pbitpZGtpdC1jb3JlQDIuMS4wXzZjM2M1ZTZhMDA3YTRjY2E1YjE1ZTAxYmU4MTkzZjExL25vZGVfbW9kdWxlcy9Ad29ybGRjb2luL2lka2l0LWNvcmUvYnVpbGQvaW5kZXguanM/MGRlNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBlbmNvZGVBY3Rpb24sXG4gIGdlbmVyYXRlU2lnbmFsXG59IGZyb20gXCIuL2NodW5rLUhaMlNRQTVWLmpzXCI7XG5cbi8vIHNyYy90eXBlcy9icmlkZ2UudHNcbnZhciBBcHBFcnJvckNvZGVzID0gLyogQF9fUFVSRV9fICovICgoQXBwRXJyb3JDb2RlczIpID0+IHtcbiAgQXBwRXJyb3JDb2RlczJbXCJDb25uZWN0aW9uRmFpbGVkXCJdID0gXCJjb25uZWN0aW9uX2ZhaWxlZFwiO1xuICBBcHBFcnJvckNvZGVzMltcIlZlcmlmaWNhdGlvblJlamVjdGVkXCJdID0gXCJ2ZXJpZmljYXRpb25fcmVqZWN0ZWRcIjtcbiAgQXBwRXJyb3JDb2RlczJbXCJNYXhWZXJpZmljYXRpb25zUmVhY2hlZFwiXSA9IFwibWF4X3ZlcmlmaWNhdGlvbnNfcmVhY2hlZFwiO1xuICBBcHBFcnJvckNvZGVzMltcIkNyZWRlbnRpYWxVbmF2YWlsYWJsZVwiXSA9IFwiY3JlZGVudGlhbF91bmF2YWlsYWJsZVwiO1xuICBBcHBFcnJvckNvZGVzMltcIk1hbGZvcm1lZFJlcXVlc3RcIl0gPSBcIm1hbGZvcm1lZF9yZXF1ZXN0XCI7XG4gIEFwcEVycm9yQ29kZXMyW1wiSW52YWxpZE5ldHdvcmtcIl0gPSBcImludmFsaWRfbmV0d29ya1wiO1xuICBBcHBFcnJvckNvZGVzMltcIkluY2x1c2lvblByb29mRmFpbGVkXCJdID0gXCJpbmNsdXNpb25fcHJvb2ZfZmFpbGVkXCI7XG4gIEFwcEVycm9yQ29kZXMyW1wiSW5jbHVzaW9uUHJvb2ZQZW5kaW5nXCJdID0gXCJpbmNsdXNpb25fcHJvb2ZfcGVuZGluZ1wiO1xuICBBcHBFcnJvckNvZGVzMltcIlVuZXhwZWN0ZWRSZXNwb25zZVwiXSA9IFwidW5leHBlY3RlZF9yZXNwb25zZVwiO1xuICBBcHBFcnJvckNvZGVzMltcIkZhaWxlZEJ5SG9zdEFwcFwiXSA9IFwiZmFpbGVkX2J5X2hvc3RfYXBwXCI7XG4gIEFwcEVycm9yQ29kZXMyW1wiR2VuZXJpY0Vycm9yXCJdID0gXCJnZW5lcmljX2Vycm9yXCI7XG4gIHJldHVybiBBcHBFcnJvckNvZGVzMjtcbn0pKEFwcEVycm9yQ29kZXMgfHwge30pO1xudmFyIFZlcmlmaWNhdGlvblN0YXRlID0gLyogQF9fUFVSRV9fICovICgoVmVyaWZpY2F0aW9uU3RhdGUyKSA9PiB7XG4gIFZlcmlmaWNhdGlvblN0YXRlMltcIlByZXBhcmluZ0NsaWVudFwiXSA9IFwibG9hZGluZ193aWRnZXRcIjtcbiAgVmVyaWZpY2F0aW9uU3RhdGUyW1wiV2FpdGluZ0ZvckNvbm5lY3Rpb25cIl0gPSBcImF3YWl0aW5nX2Nvbm5lY3Rpb25cIjtcbiAgVmVyaWZpY2F0aW9uU3RhdGUyW1wiV2FpdGluZ0ZvckFwcFwiXSA9IFwiYXdhaXRpbmdfYXBwXCI7XG4gIFZlcmlmaWNhdGlvblN0YXRlMltcIkNvbmZpcm1lZFwiXSA9IFwiY29uZmlybWVkXCI7XG4gIFZlcmlmaWNhdGlvblN0YXRlMltcIkZhaWxlZFwiXSA9IFwiZmFpbGVkXCI7XG4gIHJldHVybiBWZXJpZmljYXRpb25TdGF0ZTI7XG59KShWZXJpZmljYXRpb25TdGF0ZSB8fCB7fSk7XG5cbi8vIHNyYy90eXBlcy9jb25maWcudHNcbnZhciBDcmVkZW50aWFsVHlwZSA9IC8qIEBfX1BVUkVfXyAqLyAoKENyZWRlbnRpYWxUeXBlMikgPT4ge1xuICBDcmVkZW50aWFsVHlwZTJbXCJPcmJcIl0gPSBcIm9yYlwiO1xuICBDcmVkZW50aWFsVHlwZTJbXCJTZWN1cmVEb2N1bWVudFwiXSA9IFwic2VjdXJlX2RvY3VtZW50XCI7XG4gIENyZWRlbnRpYWxUeXBlMltcIkRvY3VtZW50XCJdID0gXCJkb2N1bWVudFwiO1xuICBDcmVkZW50aWFsVHlwZTJbXCJEZXZpY2VcIl0gPSBcImRldmljZVwiO1xuICByZXR1cm4gQ3JlZGVudGlhbFR5cGUyO1xufSkoQ3JlZGVudGlhbFR5cGUgfHwge30pO1xudmFyIFZlcmlmaWNhdGlvbkxldmVsID0gLyogQF9fUFVSRV9fICovICgoVmVyaWZpY2F0aW9uTGV2ZWwyKSA9PiB7XG4gIFZlcmlmaWNhdGlvbkxldmVsMltcIk9yYlwiXSA9IFwib3JiXCI7XG4gIFZlcmlmaWNhdGlvbkxldmVsMltcIlNlY3VyZURvY3VtZW50XCJdID0gXCJzZWN1cmVfZG9jdW1lbnRcIjtcbiAgVmVyaWZpY2F0aW9uTGV2ZWwyW1wiRG9jdW1lbnRcIl0gPSBcImRvY3VtZW50XCI7XG4gIFZlcmlmaWNhdGlvbkxldmVsMltcIkRldmljZVwiXSA9IFwiZGV2aWNlXCI7XG4gIHJldHVybiBWZXJpZmljYXRpb25MZXZlbDI7XG59KShWZXJpZmljYXRpb25MZXZlbCB8fCB7fSk7XG5cbi8vIHNyYy9icmlkZ2UudHNcbmltcG9ydCB7IGNyZWF0ZSB9IGZyb20gXCJ6dXN0YW5kXCI7XG5cbi8vIHNyYy9saWIvdmFsaWRhdGlvbi50c1xuZnVuY3Rpb24gdmFsaWRhdGVfYnJpZGdlX3VybChicmlkZ2VfdXJsLCBpc19zdGFnaW5nKSB7XG4gIHRyeSB7XG4gICAgbmV3IFVSTChicmlkZ2VfdXJsKTtcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiB7IHZhbGlkOiBmYWxzZSwgZXJyb3JzOiBbXCJGYWlsZWQgdG8gcGFyc2UgQnJpZGdlIFVSTC5cIl0gfTtcbiAgfVxuICBjb25zdCB0ZXN0X3VybCA9IG5ldyBVUkwoYnJpZGdlX3VybCk7XG4gIGNvbnN0IGVycm9ycyA9IFtdO1xuICBpZiAoaXNfc3RhZ2luZyAmJiBbXCJsb2NhbGhvc3RcIiwgXCIxMjcuMC4wLjFcIl0uaW5jbHVkZXModGVzdF91cmwuaG9zdG5hbWUpKSB7XG4gICAgY29uc29sZS5sb2coXCJVc2luZyBzdGFnaW5nIGFwcF9pZCB3aXRoIGxvY2FsaG9zdCBicmlkZ2VfdXJsLiBTa2lwcGluZyB2YWxpZGF0aW9uLlwiKTtcbiAgICByZXR1cm4geyB2YWxpZDogdHJ1ZSB9O1xuICB9XG4gIGlmICh0ZXN0X3VybC5wcm90b2NvbCAhPT0gXCJodHRwczpcIikge1xuICAgIGVycm9ycy5wdXNoKFwiQnJpZGdlIFVSTCBtdXN0IHVzZSBIVFRQUy5cIik7XG4gIH1cbiAgaWYgKHRlc3RfdXJsLnBvcnQpIHtcbiAgICBlcnJvcnMucHVzaChcIkJyaWRnZSBVUkwgbXVzdCB1c2UgdGhlIGRlZmF1bHQgcG9ydCAoNDQzKS5cIik7XG4gIH1cbiAgaWYgKHRlc3RfdXJsLnBhdGhuYW1lICE9PSBcIi9cIikge1xuICAgIGVycm9ycy5wdXNoKFwiQnJpZGdlIFVSTCBtdXN0IG5vdCBoYXZlIGEgcGF0aC5cIik7XG4gIH1cbiAgaWYgKHRlc3RfdXJsLnNlYXJjaCkge1xuICAgIGVycm9ycy5wdXNoKFwiQnJpZGdlIFVSTCBtdXN0IG5vdCBoYXZlIHF1ZXJ5IHBhcmFtZXRlcnMuXCIpO1xuICB9XG4gIGlmICh0ZXN0X3VybC5oYXNoKSB7XG4gICAgZXJyb3JzLnB1c2goXCJCcmlkZ2UgVVJMIG11c3Qgbm90IGhhdmUgYSBmcmFnbWVudC5cIik7XG4gIH1cbiAgaWYgKCF0ZXN0X3VybC5ob3N0bmFtZS5lbmRzV2l0aChcIi53b3JsZGNvaW4ub3JnXCIpICYmICF0ZXN0X3VybC5ob3N0bmFtZS5lbmRzV2l0aChcIi50b29sc2Zvcmh1bWFuaXR5LmNvbVwiKSkge1xuICAgIGNvbnNvbGUud2FybihcbiAgICAgIFwiQnJpZGdlIFVSTCBzaG91bGQgYmUgYSBzdWJkb21haW4gb2Ygd29ybGRjb2luLm9yZyBvciB0b29sc2Zvcmh1bWFuaXR5LmNvbS4gVGhlIHVzZXIncyBpZGVudGl0eSB3YWxsZXQgbWF5IHJlZnVzZSB0byBjb25uZWN0LiBUaGlzIGlzIGEgdGVtcG9yYXJ5IG1lYXN1cmUgYW5kIG1heSBiZSByZW1vdmVkIGluIHRoZSBmdXR1cmUuXCJcbiAgICApO1xuICB9XG4gIGlmIChlcnJvcnMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIHsgdmFsaWQ6IGZhbHNlLCBlcnJvcnMgfTtcbiAgfVxuICByZXR1cm4geyB2YWxpZDogdHJ1ZSB9O1xufVxuXG4vLyBzcmMvbGliL3BsYXRmb3JtLnRzXG5pbXBvcnQgeyBpc0Jyb3dzZXIsIGlzTm9kZSBhcyBpc05vZGVCb29sZWFuIH0gZnJvbSBcImJyb3dzZXItb3Itbm9kZVwiO1xudmFyIGlzUmVhY3ROYXRpdmUgPSAoKSA9PiB7XG4gIHJldHVybiB0eXBlb2YgbmF2aWdhdG9yICE9PSBcInVuZGVmaW5lZFwiICYmIG5hdmlnYXRvci5wcm9kdWN0ID09PSBcIlJlYWN0TmF0aXZlXCI7XG59O1xudmFyIGlzV2ViID0gKCkgPT4ge1xuICByZXR1cm4gaXNCcm93c2VyO1xufTtcbnZhciBnZXRHbG9iYWxPYmplY3QgPSAoKSA9PiB7XG4gIGlmICh0eXBlb2YgZ2xvYmFsVGhpcyAhPT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIGdsb2JhbFRoaXM7XG4gIGlmICh0eXBlb2Ygc2VsZiAhPT0gXCJ1bmRlZmluZWRcIikgcmV0dXJuIHNlbGY7XG4gIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiKSByZXR1cm4gd2luZG93O1xuICB0aHJvdyBuZXcgRXJyb3IoXCJVbmFibGUgdG8gbG9jYXRlIGdsb2JhbCBvYmplY3RcIik7XG59O1xudmFyIGdldENyeXB0byA9ICgpID0+IHtcbiAgY29uc3QgZ2xvYmFsT2JqID0gZ2V0R2xvYmFsT2JqZWN0KCk7XG4gIGlmICh0eXBlb2YgZ2xvYmFsT2JqLmNyeXB0byAhPT0gXCJ1bmRlZmluZWRcIikge1xuICAgIHJldHVybiBnbG9iYWxPYmouY3J5cHRvO1xuICB9XG4gIHRocm93IG5ldyBFcnJvcihcIkNyeXB0byBBUEkgbm90IGF2YWlsYWJsZS4gRm9yIFJlYWN0IE5hdGl2ZSwgZW5zdXJlIHBvbHlmaWxscyBhcmUgc2V0IHVwIHByb3Blcmx5LlwiKTtcbn07XG5cbi8vIHNyYy9saWIvdXRpbHMudHNcbmltcG9ydCB7IEJ1ZmZlciB9IGZyb20gXCJidWZmZXIvaW5kZXguanNcIjtcbnZhciBERUZBVUxUX1ZFUklGSUNBVElPTl9MRVZFTCA9IFwib3JiXCIgLyogT3JiICovO1xudmFyIGJ1ZmZlcl9lbmNvZGUgPSAoYnVmZmVyKSA9PiB7XG4gIHJldHVybiBCdWZmZXIuZnJvbShidWZmZXIpLnRvU3RyaW5nKFwiYmFzZTY0XCIpO1xufTtcbnZhciBidWZmZXJfZGVjb2RlID0gKGVuY29kZWQpID0+IHtcbiAgcmV0dXJuIEJ1ZmZlci5mcm9tKGVuY29kZWQsIFwiYmFzZTY0XCIpO1xufTtcbnZhciB2ZXJpZmljYXRpb25fbGV2ZWxfdG9fY3JlZGVudGlhbF90eXBlcyA9ICh2ZXJpZmljYXRpb25fbGV2ZWwpID0+IHtcbiAgc3dpdGNoICh2ZXJpZmljYXRpb25fbGV2ZWwpIHtcbiAgICBjYXNlIFwiZGV2aWNlXCIgLyogRGV2aWNlICovOlxuICAgICAgcmV0dXJuIFtcIm9yYlwiIC8qIE9yYiAqLywgXCJkZXZpY2VcIiAvKiBEZXZpY2UgKi9dO1xuICAgIGNhc2UgXCJkb2N1bWVudFwiIC8qIERvY3VtZW50ICovOlxuICAgICAgcmV0dXJuIFtcImRvY3VtZW50XCIgLyogRG9jdW1lbnQgKi8sIFwic2VjdXJlX2RvY3VtZW50XCIgLyogU2VjdXJlRG9jdW1lbnQgKi8sIFwib3JiXCIgLyogT3JiICovXTtcbiAgICBjYXNlIFwic2VjdXJlX2RvY3VtZW50XCIgLyogU2VjdXJlRG9jdW1lbnQgKi86XG4gICAgICByZXR1cm4gW1wic2VjdXJlX2RvY3VtZW50XCIgLyogU2VjdXJlRG9jdW1lbnQgKi8sIFwib3JiXCIgLyogT3JiICovXTtcbiAgICBjYXNlIFwib3JiXCIgLyogT3JiICovOlxuICAgICAgcmV0dXJuIFtcIm9yYlwiIC8qIE9yYiAqL107XG4gICAgZGVmYXVsdDpcbiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biB2ZXJpZmljYXRpb24gbGV2ZWw6ICR7dmVyaWZpY2F0aW9uX2xldmVsfWApO1xuICB9XG59O1xudmFyIGNyZWRlbnRpYWxfdHlwZV90b192ZXJpZmljYXRpb25fbGV2ZWwgPSAoY3JlZGVudGlhbF90eXBlKSA9PiB7XG4gIHN3aXRjaCAoY3JlZGVudGlhbF90eXBlKSB7XG4gICAgY2FzZSBcIm9yYlwiIC8qIE9yYiAqLzpcbiAgICAgIHJldHVybiBcIm9yYlwiIC8qIE9yYiAqLztcbiAgICBjYXNlIFwic2VjdXJlX2RvY3VtZW50XCIgLyogU2VjdXJlRG9jdW1lbnQgKi86XG4gICAgICByZXR1cm4gXCJzZWN1cmVfZG9jdW1lbnRcIiAvKiBTZWN1cmVEb2N1bWVudCAqLztcbiAgICBjYXNlIFwiZG9jdW1lbnRcIiAvKiBEb2N1bWVudCAqLzpcbiAgICAgIHJldHVybiBcImRvY3VtZW50XCIgLyogRG9jdW1lbnQgKi87XG4gICAgY2FzZSBcImRldmljZVwiIC8qIERldmljZSAqLzpcbiAgICAgIHJldHVybiBcImRldmljZVwiIC8qIERldmljZSAqLztcbiAgICBkZWZhdWx0OlxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIGNyZWRlbnRpYWxfdHlwZTogJHtjcmVkZW50aWFsX3R5cGV9YCk7XG4gIH1cbn07XG5cbi8vIHNyYy9saWIvYWRhcHRlcnMvd2ViLWNyeXB0by1hZGFwdGVyLnRzXG52YXIgV2ViQ3J5cHRvQWRhcHRlciA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5lbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG4gICAgdGhpcy5kZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG4gIH1cbiAgYXN5bmMgZ2VuZXJhdGVLZXkoKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGl2OiB3aW5kb3cuY3J5cHRvLmdldFJhbmRvbVZhbHVlcyhuZXcgVWludDhBcnJheSgxMikpLFxuICAgICAga2V5OiBhd2FpdCB3aW5kb3cuY3J5cHRvLnN1YnRsZS5nZW5lcmF0ZUtleSh7IG5hbWU6IFwiQUVTLUdDTVwiLCBsZW5ndGg6IDI1NiB9LCB0cnVlLCBbXCJlbmNyeXB0XCIsIFwiZGVjcnlwdFwiXSlcbiAgICB9O1xuICB9XG4gIGFzeW5jIGV4cG9ydEtleShrZXkpIHtcbiAgICByZXR1cm4gYnVmZmVyX2VuY29kZShhd2FpdCB3aW5kb3cuY3J5cHRvLnN1YnRsZS5leHBvcnRLZXkoXCJyYXdcIiwga2V5KSk7XG4gIH1cbiAgYXN5bmMgZW5jcnlwdFJlcXVlc3Qoa2V5LCBpdiwgcmVxdWVzdCkge1xuICAgIHJldHVybiB7XG4gICAgICBpdjogYnVmZmVyX2VuY29kZShpdiksXG4gICAgICBwYXlsb2FkOiBidWZmZXJfZW5jb2RlKFxuICAgICAgICBhd2FpdCB3aW5kb3cuY3J5cHRvLnN1YnRsZS5lbmNyeXB0KHsgbmFtZTogXCJBRVMtR0NNXCIsIGl2IH0sIGtleSwgdGhpcy5lbmNvZGVyLmVuY29kZShyZXF1ZXN0KSlcbiAgICAgIClcbiAgICB9O1xuICB9XG4gIGFzeW5jIGRlY3J5cHRSZXNwb25zZShrZXksIGl2LCBwYXlsb2FkKSB7XG4gICAgcmV0dXJuIHRoaXMuZGVjb2Rlci5kZWNvZGUoXG4gICAgICBhd2FpdCB3aW5kb3cuY3J5cHRvLnN1YnRsZS5kZWNyeXB0KHsgbmFtZTogXCJBRVMtR0NNXCIsIGl2IH0sIGtleSwgYnVmZmVyX2RlY29kZShwYXlsb2FkKSlcbiAgICApO1xuICB9XG59O1xuXG4vLyBzcmMvbGliL2FkYXB0ZXJzL3JlYWN0LW5hdGl2ZS1jcnlwdG8tYWRhcHRlci50c1xudmFyIFJlYWN0TmF0aXZlQ3J5cHRvQWRhcHRlciA9IGNsYXNzIHtcbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5lbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG4gICAgdGhpcy5kZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7XG4gIH1cbiAgYXN5bmMgZ2VuZXJhdGVLZXkoKSB7XG4gICAgY29uc3QgY3J5cHRvID0gZ2V0Q3J5cHRvKCk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGl2OiBjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzKG5ldyBVaW50OEFycmF5KDEyKSksXG4gICAgICBrZXk6IGF3YWl0IGNyeXB0by5zdWJ0bGUuZ2VuZXJhdGVLZXkoeyBuYW1lOiBcIkFFUy1HQ01cIiwgbGVuZ3RoOiAyNTYgfSwgdHJ1ZSwgW1wiZW5jcnlwdFwiLCBcImRlY3J5cHRcIl0pXG4gICAgfTtcbiAgfVxuICBhc3luYyBleHBvcnRLZXkoa2V5KSB7XG4gICAgY29uc3QgY3J5cHRvID0gZ2V0Q3J5cHRvKCk7XG4gICAgcmV0dXJuIGJ1ZmZlcl9lbmNvZGUoYXdhaXQgY3J5cHRvLnN1YnRsZS5leHBvcnRLZXkoXCJyYXdcIiwga2V5KSk7XG4gIH1cbiAgYXN5bmMgZW5jcnlwdFJlcXVlc3Qoa2V5LCBpdiwgcmVxdWVzdCkge1xuICAgIGNvbnN0IGNyeXB0byA9IGdldENyeXB0bygpO1xuICAgIHJldHVybiB7XG4gICAgICBpdjogYnVmZmVyX2VuY29kZShpdiksXG4gICAgICBwYXlsb2FkOiBidWZmZXJfZW5jb2RlKFxuICAgICAgICBhd2FpdCBjcnlwdG8uc3VidGxlLmVuY3J5cHQoeyBuYW1lOiBcIkFFUy1HQ01cIiwgaXYgfSwga2V5LCB0aGlzLmVuY29kZXIuZW5jb2RlKHJlcXVlc3QpKVxuICAgICAgKVxuICAgIH07XG4gIH1cbiAgYXN5bmMgZGVjcnlwdFJlc3BvbnNlKGtleSwgaXYsIHBheWxvYWQpIHtcbiAgICBjb25zdCBjcnlwdG8gPSBnZXRDcnlwdG8oKTtcbiAgICByZXR1cm4gdGhpcy5kZWNvZGVyLmRlY29kZShhd2FpdCBjcnlwdG8uc3VidGxlLmRlY3J5cHQoeyBuYW1lOiBcIkFFUy1HQ01cIiwgaXYgfSwga2V5LCBidWZmZXJfZGVjb2RlKHBheWxvYWQpKSk7XG4gIH1cbn07XG5cbi8vIHNyYy9saWIvY3J5cHRvLnRzXG52YXIgY3J5cHRvQWRhcHRlckluc3RhbmNlID0gbnVsbDtcbnZhciBnZXRDcnlwdG9BZGFwdGVyID0gKCkgPT4ge1xuICBpZiAoY3J5cHRvQWRhcHRlckluc3RhbmNlKSB7XG4gICAgcmV0dXJuIGNyeXB0b0FkYXB0ZXJJbnN0YW5jZTtcbiAgfVxuICBpZiAoaXNXZWIoKSkge1xuICAgIGNyeXB0b0FkYXB0ZXJJbnN0YW5jZSA9IG5ldyBXZWJDcnlwdG9BZGFwdGVyKCk7XG4gICAgcmV0dXJuIGNyeXB0b0FkYXB0ZXJJbnN0YW5jZTtcbiAgfVxuICBpZiAoaXNSZWFjdE5hdGl2ZSgpKSB7XG4gICAgY3J5cHRvQWRhcHRlckluc3RhbmNlID0gbmV3IFJlYWN0TmF0aXZlQ3J5cHRvQWRhcHRlcigpO1xuICAgIHJldHVybiBjcnlwdG9BZGFwdGVySW5zdGFuY2U7XG4gIH1cbiAgdGhyb3cgbmV3IEVycm9yKFwiVW5zdXBwb3J0ZWQgcGxhdGZvcm1cIik7XG59O1xudmFyIGdlbmVyYXRlS2V5ID0gYXN5bmMgKCkgPT4ge1xuICByZXR1cm4gZ2V0Q3J5cHRvQWRhcHRlcigpLmdlbmVyYXRlS2V5KCk7XG59O1xudmFyIGV4cG9ydEtleSA9IGFzeW5jIChrZXkpID0+IHtcbiAgcmV0dXJuIGdldENyeXB0b0FkYXB0ZXIoKS5leHBvcnRLZXkoa2V5KTtcbn07XG52YXIgZW5jcnlwdFJlcXVlc3QgPSBhc3luYyAoa2V5LCBpdiwgcmVxdWVzdCkgPT4ge1xuICByZXR1cm4gZ2V0Q3J5cHRvQWRhcHRlcigpLmVuY3J5cHRSZXF1ZXN0KGtleSwgaXYsIHJlcXVlc3QpO1xufTtcbnZhciBkZWNyeXB0UmVzcG9uc2UgPSBhc3luYyAoa2V5LCBpdiwgcGF5bG9hZCkgPT4ge1xuICByZXR1cm4gZ2V0Q3J5cHRvQWRhcHRlcigpLmRlY3J5cHRSZXNwb25zZShrZXksIGl2LCBwYXlsb2FkKTtcbn07XG5cbi8vIHNyYy9icmlkZ2UudHNcbnZhciBERUZBVUxUX0JSSURHRV9VUkwgPSBcImh0dHBzOi8vYnJpZGdlLndvcmxkY29pbi5vcmdcIjtcbnZhciBjcmVhdGVTdG9yZUltcGxlbWVudGF0aW9uID0gKHNldCwgZ2V0KSA9PiAoe1xuICBpdjogbnVsbCxcbiAga2V5OiBudWxsLFxuICByZXN1bHQ6IG51bGwsXG4gIGVycm9yQ29kZTogbnVsbCxcbiAgcmVxdWVzdElkOiBudWxsLFxuICBjb25uZWN0b3JVUkk6IG51bGwsXG4gIGJyaWRnZV91cmw6IERFRkFVTFRfQlJJREdFX1VSTCxcbiAgdmVyaWZpY2F0aW9uU3RhdGU6IFwibG9hZGluZ193aWRnZXRcIiAvKiBQcmVwYXJpbmdDbGllbnQgKi8sXG4gIGNyZWF0ZUNsaWVudDogYXN5bmMgKHsgYnJpZGdlX3VybCwgYXBwX2lkLCB2ZXJpZmljYXRpb25fbGV2ZWwsIGFjdGlvbl9kZXNjcmlwdGlvbiwgYWN0aW9uLCBzaWduYWwsIHBhcnRuZXIgfSkgPT4ge1xuICAgIGNvbnN0IHsga2V5LCBpdiB9ID0gYXdhaXQgZ2VuZXJhdGVLZXkoKTtcbiAgICBpZiAoYnJpZGdlX3VybCkge1xuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IHZhbGlkYXRlX2JyaWRnZV91cmwoYnJpZGdlX3VybCwgYXBwX2lkLmluY2x1ZGVzKFwic3RhZ2luZ1wiKSk7XG4gICAgICBpZiAoIXZhbGlkYXRpb24udmFsaWQpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcih2YWxpZGF0aW9uLmVycm9ycy5qb2luKFwiXFxuXCIpKTtcbiAgICAgICAgc2V0KHsgdmVyaWZpY2F0aW9uU3RhdGU6IFwiZmFpbGVkXCIgLyogRmFpbGVkICovIH0pO1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGJyaWRnZV91cmwuIFBsZWFzZSBjaGVjayB0aGUgY29uc29sZSBmb3IgbW9yZSBkZXRhaWxzLlwiKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgcmVzID0gYXdhaXQgZmV0Y2gobmV3IFVSTChcIi9yZXF1ZXN0XCIsIGJyaWRnZV91cmwgPz8gREVGQVVMVF9CUklER0VfVVJMKSwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHsgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KFxuICAgICAgICBhd2FpdCBlbmNyeXB0UmVxdWVzdChcbiAgICAgICAgICBrZXksXG4gICAgICAgICAgaXYsXG4gICAgICAgICAgSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgYXBwX2lkLFxuICAgICAgICAgICAgYWN0aW9uX2Rlc2NyaXB0aW9uLFxuICAgICAgICAgICAgYWN0aW9uOiBlbmNvZGVBY3Rpb24oYWN0aW9uKSxcbiAgICAgICAgICAgIHNpZ25hbDogZ2VuZXJhdGVTaWduYWwoc2lnbmFsKS5kaWdlc3QsXG4gICAgICAgICAgICBjcmVkZW50aWFsX3R5cGVzOiB2ZXJpZmljYXRpb25fbGV2ZWxfdG9fY3JlZGVudGlhbF90eXBlcyhcbiAgICAgICAgICAgICAgdmVyaWZpY2F0aW9uX2xldmVsID8/IERFRkFVTFRfVkVSSUZJQ0FUSU9OX0xFVkVMXG4gICAgICAgICAgICApLFxuICAgICAgICAgICAgdmVyaWZpY2F0aW9uX2xldmVsOiB2ZXJpZmljYXRpb25fbGV2ZWwgPz8gREVGQVVMVF9WRVJJRklDQVRJT05fTEVWRUxcbiAgICAgICAgICB9KVxuICAgICAgICApXG4gICAgICApXG4gICAgfSk7XG4gICAgaWYgKCFyZXMub2spIHtcbiAgICAgIHNldCh7IHZlcmlmaWNhdGlvblN0YXRlOiBcImZhaWxlZFwiIC8qIEZhaWxlZCAqLyB9KTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBjcmVhdGUgY2xpZW50XCIpO1xuICAgIH1cbiAgICBjb25zdCB7IHJlcXVlc3RfaWQgfSA9IGF3YWl0IHJlcy5qc29uKCk7XG4gICAgc2V0KHtcbiAgICAgIGl2LFxuICAgICAga2V5LFxuICAgICAgcmVxdWVzdElkOiByZXF1ZXN0X2lkLFxuICAgICAgYnJpZGdlX3VybDogYnJpZGdlX3VybCA/PyBERUZBVUxUX0JSSURHRV9VUkwsXG4gICAgICB2ZXJpZmljYXRpb25TdGF0ZTogXCJhd2FpdGluZ19jb25uZWN0aW9uXCIgLyogV2FpdGluZ0ZvckNvbm5lY3Rpb24gKi8sXG4gICAgICBjb25uZWN0b3JVUkk6IGBodHRwczovL3dvcmxkLm9yZy92ZXJpZnk/dD13bGQmaT0ke3JlcXVlc3RfaWR9Jms9JHtlbmNvZGVVUklDb21wb25lbnQoXG4gICAgICAgIGF3YWl0IGV4cG9ydEtleShrZXkpXG4gICAgICApfSR7YnJpZGdlX3VybCAmJiBicmlkZ2VfdXJsICE9PSBERUZBVUxUX0JSSURHRV9VUkwgPyBgJmI9JHtlbmNvZGVVUklDb21wb25lbnQoYnJpZGdlX3VybCl9YCA6IFwiXCJ9JHtwYXJ0bmVyID8gYCZwYXJ0bmVyPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHRydWUpfWAgOiBcIlwifWBcbiAgICB9KTtcbiAgfSxcbiAgcG9sbEZvclVwZGF0ZXM6IGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBrZXkgPSBnZXQoKS5rZXk7XG4gICAgaWYgKCFrZXkpIHRocm93IG5ldyBFcnJvcihcIk5vIGtleXBhaXIgZm91bmQuIFBsZWFzZSBjYWxsIGBjcmVhdGVDbGllbnRgIGZpcnN0LlwiKTtcbiAgICBjb25zdCByZXMgPSBhd2FpdCBmZXRjaChuZXcgVVJMKGAvcmVzcG9uc2UvJHtnZXQoKS5yZXF1ZXN0SWR9YCwgZ2V0KCkuYnJpZGdlX3VybCkpO1xuICAgIGlmICghcmVzLm9rKSB7XG4gICAgICByZXR1cm4gc2V0KHtcbiAgICAgICAgZXJyb3JDb2RlOiBcImNvbm5lY3Rpb25fZmFpbGVkXCIgLyogQ29ubmVjdGlvbkZhaWxlZCAqLyxcbiAgICAgICAgdmVyaWZpY2F0aW9uU3RhdGU6IFwiZmFpbGVkXCIgLyogRmFpbGVkICovXG4gICAgICB9KTtcbiAgICB9XG4gICAgY29uc3QgeyByZXNwb25zZSwgc3RhdHVzIH0gPSBhd2FpdCByZXMuanNvbigpO1xuICAgIGlmIChzdGF0dXMgIT0gXCJjb21wbGV0ZWRcIiAvKiBDb21wbGV0ZWQgKi8pIHtcbiAgICAgIHJldHVybiBzZXQoe1xuICAgICAgICB2ZXJpZmljYXRpb25TdGF0ZTogc3RhdHVzID09IFwicmV0cmlldmVkXCIgLyogUmV0cmlldmVkICovID8gXCJhd2FpdGluZ19hcHBcIiAvKiBXYWl0aW5nRm9yQXBwICovIDogXCJhd2FpdGluZ19jb25uZWN0aW9uXCIgLyogV2FpdGluZ0ZvckNvbm5lY3Rpb24gKi9cbiAgICAgIH0pO1xuICAgIH1cbiAgICBsZXQgcmVzdWx0ID0gSlNPTi5wYXJzZShcbiAgICAgIGF3YWl0IGRlY3J5cHRSZXNwb25zZShrZXksIGJ1ZmZlcl9kZWNvZGUocmVzcG9uc2UuaXYpLCByZXNwb25zZS5wYXlsb2FkKVxuICAgICk7XG4gICAgaWYgKFwiZXJyb3JfY29kZVwiIGluIHJlc3VsdCkge1xuICAgICAgcmV0dXJuIHNldCh7XG4gICAgICAgIGVycm9yQ29kZTogcmVzdWx0LmVycm9yX2NvZGUsXG4gICAgICAgIHZlcmlmaWNhdGlvblN0YXRlOiBcImZhaWxlZFwiIC8qIEZhaWxlZCAqL1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmIChcImNyZWRlbnRpYWxfdHlwZVwiIGluIHJlc3VsdCkge1xuICAgICAgcmVzdWx0ID0ge1xuICAgICAgICB2ZXJpZmljYXRpb25fbGV2ZWw6IGNyZWRlbnRpYWxfdHlwZV90b192ZXJpZmljYXRpb25fbGV2ZWwocmVzdWx0LmNyZWRlbnRpYWxfdHlwZSksXG4gICAgICAgIC4uLnJlc3VsdFxuICAgICAgfTtcbiAgICB9XG4gICAgc2V0KHtcbiAgICAgIHJlc3VsdCxcbiAgICAgIGtleTogbnVsbCxcbiAgICAgIHJlcXVlc3RJZDogbnVsbCxcbiAgICAgIGNvbm5lY3RvclVSSTogbnVsbCxcbiAgICAgIHZlcmlmaWNhdGlvblN0YXRlOiBcImNvbmZpcm1lZFwiIC8qIENvbmZpcm1lZCAqL1xuICAgIH0pO1xuICB9LFxuICByZXNldDogKCkgPT4ge1xuICAgIHNldCh7XG4gICAgICBpdjogbnVsbCxcbiAgICAgIGtleTogbnVsbCxcbiAgICAgIHJlc3VsdDogbnVsbCxcbiAgICAgIGVycm9yQ29kZTogbnVsbCxcbiAgICAgIHJlcXVlc3RJZDogbnVsbCxcbiAgICAgIGNvbm5lY3RvclVSSTogbnVsbCxcbiAgICAgIHZlcmlmaWNhdGlvblN0YXRlOiBcImxvYWRpbmdfd2lkZ2V0XCIgLyogUHJlcGFyaW5nQ2xpZW50ICovXG4gICAgfSk7XG4gIH1cbn0pO1xudmFyIHVzZVdvcmxkQnJpZGdlU3RvcmUgPSBjcmVhdGUoY3JlYXRlU3RvcmVJbXBsZW1lbnRhdGlvbik7XG52YXIgY3JlYXRlV29ybGRCcmlkZ2VTdG9yZSA9ICgpID0+IGNyZWF0ZShjcmVhdGVTdG9yZUltcGxlbWVudGF0aW9uKTtcbmV4cG9ydCB7XG4gIEFwcEVycm9yQ29kZXMsXG4gIENyZWRlbnRpYWxUeXBlLFxuICBERUZBVUxUX1ZFUklGSUNBVElPTl9MRVZFTCxcbiAgVmVyaWZpY2F0aW9uTGV2ZWwsXG4gIFZlcmlmaWNhdGlvblN0YXRlLFxuICBjcmVhdGVXb3JsZEJyaWRnZVN0b3JlLFxuICB1c2VXb3JsZEJyaWRnZVN0b3JlLFxuICB2ZXJpZmljYXRpb25fbGV2ZWxfdG9fY3JlZGVudGlhbF90eXBlc1xufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@worldcoin+idkit-core@2.1.0_6c3c5e6a007a4cca5b15e01be8193f11/node_modules/@worldcoin/idkit-core/build/index.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@worldcoin+idkit-core@2.1.0_6c3c5e6a007a4cca5b15e01be8193f11/node_modules/@worldcoin/idkit-core/build/lib/backend.js":
/*!*************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@worldcoin+idkit-core@2.1.0_6c3c5e6a007a4cca5b15e01be8193f11/node_modules/@worldcoin/idkit-core/build/lib/backend.js ***!
  \*************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   verifyCloudProof: () => (/* binding */ verifyCloudProof)\n/* harmony export */ });\n/* harmony import */ var _chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../chunk-HZ2SQA5V.js */ \"(ssr)/./node_modules/.pnpm/@worldcoin+idkit-core@2.1.0_6c3c5e6a007a4cca5b15e01be8193f11/node_modules/@worldcoin/idkit-core/build/chunk-HZ2SQA5V.js\");\n/* harmony import */ var browser_or_node__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! browser-or-node */ \"(ssr)/./node_modules/.pnpm/browser-or-node@3.0.0-pre.0/node_modules/browser-or-node/dist/index.mjs\");\n\n\n// src/lib/backend.ts\n\nasync function verifyCloudProof(proof, app_id, action, signal, endpoint, headers) {\n  if (browser_or_node__WEBPACK_IMPORTED_MODULE_1__.isBrowser) {\n    throw new Error(\"verifyCloudProof can only be used in the backend.\");\n  }\n  const response = await fetch(endpoint ?? `https://developer.worldcoin.org/api/v2/verify/${app_id}`, {\n    method: \"POST\",\n    headers: {\n      ...headers ?? {},\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      ...proof,\n      action,\n      signal_hash: (0,_chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__.hashToField)(signal ?? \"\").digest\n    })\n  });\n  if (response.ok) {\n    return { success: true };\n  } else {\n    return { success: false, ...await response.json() };\n  }\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHdvcmxkY29pbitpZGtpdC1jb3JlQDIuMS4wXzZjM2M1ZTZhMDA3YTRjY2E1YjE1ZTAxYmU4MTkzZjExL25vZGVfbW9kdWxlcy9Ad29ybGRjb2luL2lka2l0LWNvcmUvYnVpbGQvbGliL2JhY2tlbmQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBRThCOztBQUU5QjtBQUM0QztBQUM1QztBQUNBLE1BQU0sc0RBQVM7QUFDZjtBQUNBO0FBQ0EsNEZBQTRGLE9BQU87QUFDbkc7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsK0RBQVc7QUFDOUIsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBLGFBQWE7QUFDYixJQUFJO0FBQ0osYUFBYTtBQUNiO0FBQ0E7QUFHRSIsInNvdXJjZXMiOlsid2VicGFjazovL3B1bHNlY2hlY2svLi9ub2RlX21vZHVsZXMvLnBucG0vQHdvcmxkY29pbitpZGtpdC1jb3JlQDIuMS4wXzZjM2M1ZTZhMDA3YTRjY2E1YjE1ZTAxYmU4MTkzZjExL25vZGVfbW9kdWxlcy9Ad29ybGRjb2luL2lka2l0LWNvcmUvYnVpbGQvbGliL2JhY2tlbmQuanM/OGIyNCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBoYXNoVG9GaWVsZFxufSBmcm9tIFwiLi4vY2h1bmstSFoyU1FBNVYuanNcIjtcblxuLy8gc3JjL2xpYi9iYWNrZW5kLnRzXG5pbXBvcnQgeyBpc0Jyb3dzZXIgfSBmcm9tIFwiYnJvd3Nlci1vci1ub2RlXCI7XG5hc3luYyBmdW5jdGlvbiB2ZXJpZnlDbG91ZFByb29mKHByb29mLCBhcHBfaWQsIGFjdGlvbiwgc2lnbmFsLCBlbmRwb2ludCwgaGVhZGVycykge1xuICBpZiAoaXNCcm93c2VyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFwidmVyaWZ5Q2xvdWRQcm9vZiBjYW4gb25seSBiZSB1c2VkIGluIHRoZSBiYWNrZW5kLlwiKTtcbiAgfVxuICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGVuZHBvaW50ID8/IGBodHRwczovL2RldmVsb3Blci53b3JsZGNvaW4ub3JnL2FwaS92Mi92ZXJpZnkvJHthcHBfaWR9YCwge1xuICAgIG1ldGhvZDogXCJQT1NUXCIsXG4gICAgaGVhZGVyczoge1xuICAgICAgLi4uaGVhZGVycyA/PyB7fSxcbiAgICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiXG4gICAgfSxcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAuLi5wcm9vZixcbiAgICAgIGFjdGlvbixcbiAgICAgIHNpZ25hbF9oYXNoOiBoYXNoVG9GaWVsZChzaWduYWwgPz8gXCJcIikuZGlnZXN0XG4gICAgfSlcbiAgfSk7XG4gIGlmIChyZXNwb25zZS5vaykge1xuICAgIHJldHVybiB7IHN1Y2Nlc3M6IHRydWUgfTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgLi4uYXdhaXQgcmVzcG9uc2UuanNvbigpIH07XG4gIH1cbn1cbmV4cG9ydCB7XG4gIHZlcmlmeUNsb3VkUHJvb2Zcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@worldcoin+idkit-core@2.1.0_6c3c5e6a007a4cca5b15e01be8193f11/node_modules/@worldcoin/idkit-core/build/lib/backend.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/@worldcoin+idkit-core@2.1.0_6c3c5e6a007a4cca5b15e01be8193f11/node_modules/@worldcoin/idkit-core/build/lib/hashing.js":
/*!*************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/@worldcoin+idkit-core@2.1.0_6c3c5e6a007a4cca5b15e01be8193f11/node_modules/@worldcoin/idkit-core/build/lib/hashing.js ***!
  \*************************************************************************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   encodeAction: () => (/* reexport safe */ _chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__.encodeAction),\n/* harmony export */   generateSignal: () => (/* reexport safe */ _chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__.generateSignal),\n/* harmony export */   hashToField: () => (/* reexport safe */ _chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__.hashToField),\n/* harmony export */   packAndEncode: () => (/* reexport safe */ _chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__.packAndEncode),\n/* harmony export */   solidityEncode: () => (/* reexport safe */ _chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__.solidityEncode)\n/* harmony export */ });\n/* harmony import */ var _chunk_HZ2SQA5V_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../chunk-HZ2SQA5V.js */ \"(ssr)/./node_modules/.pnpm/@worldcoin+idkit-core@2.1.0_6c3c5e6a007a4cca5b15e01be8193f11/node_modules/@worldcoin/idkit-core/build/chunk-HZ2SQA5V.js\");\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvLnBucG0vQHdvcmxkY29pbitpZGtpdC1jb3JlQDIuMS4wXzZjM2M1ZTZhMDA3YTRjY2E1YjE1ZTAxYmU4MTkzZjExL25vZGVfbW9kdWxlcy9Ad29ybGRjb2luL2lka2l0LWNvcmUvYnVpbGQvbGliL2hhc2hpbmcuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBTThCO0FBTzVCIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vcHVsc2VjaGVjay8uL25vZGVfbW9kdWxlcy8ucG5wbS9Ad29ybGRjb2luK2lka2l0LWNvcmVAMi4xLjBfNmMzYzVlNmEwMDdhNGNjYTViMTVlMDFiZTgxOTNmMTEvbm9kZV9tb2R1bGVzL0B3b3JsZGNvaW4vaWRraXQtY29yZS9idWlsZC9saWIvaGFzaGluZy5qcz84OGE2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIGVuY29kZUFjdGlvbixcbiAgZ2VuZXJhdGVTaWduYWwsXG4gIGhhc2hUb0ZpZWxkLFxuICBwYWNrQW5kRW5jb2RlLFxuICBzb2xpZGl0eUVuY29kZVxufSBmcm9tIFwiLi4vY2h1bmstSFoyU1FBNVYuanNcIjtcbmV4cG9ydCB7XG4gIGVuY29kZUFjdGlvbixcbiAgZ2VuZXJhdGVTaWduYWwsXG4gIGhhc2hUb0ZpZWxkLFxuICBwYWNrQW5kRW5jb2RlLFxuICBzb2xpZGl0eUVuY29kZVxufTtcbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/.pnpm/@worldcoin+idkit-core@2.1.0_6c3c5e6a007a4cca5b15e01be8193f11/node_modules/@worldcoin/idkit-core/build/lib/hashing.js\n");

/***/ })

};
;